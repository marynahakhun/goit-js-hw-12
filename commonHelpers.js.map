{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(result) {\n    return result.hits.map(({webformatURL, tags, largeImageURL, likes, views, comments, downloads})=>{\n        return ` <li>\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" \n        alt=\"${tags}\"\n        data-source=\"${largeImageURL}\">\n        <div class=\"image-info\">\n                            <ul class=\"image-info-list\">\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Likes</h2>\n                                    <p class=\"image-quantity\">${likes}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Views</h2>\n                                    <p class=\"image-quantity\">${views}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Comments</h2>\n                                    <p class=\"image-quantity\">${comments}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Downloads</h2>\n                                    <p class=\"image-quantity\">${downloads}</p>\n                                </li>\n                            </ul>\n                        </div>\n      </li>`;\n    }).join(\"\");\n}\n\nexport function initializeLightbox() {\n    return new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n}\n","import axios from 'axios';\nexport const limit = 15\nexport let page = 1\n\n    \n   \n  \nexport async function fetchIcon(query) {\n    const params = new URLSearchParams({\n        key: '42545240-8b0483885ebe28877133c0801',\n        q: query,\n        per_page: limit,\n        page: page\n      });\n    \n\n    const BASE_URL = 'https://pixabay.com/api/';\n    const response = await axios.get(\n        `${BASE_URL}?${params}`\n      );\n      page +=1\n      \n      \n      return { hits: response.data.hits, totalHits: response.data.totalHits };\n      \n    \n      }\n\n\n\n\n","import { renderImages, initializeLightbox } from './js/render-functions.js';\nimport { fetchIcon, limit } from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst button = document.querySelector(\".load-more\");\nlet lightbox;\nlet page = 1;\nlet currentQuery = ''; // Variable to store current query\n\nform.addEventListener(\"submit\", onSubmit);\nbutton.addEventListener(\"click\", loadMore);\n\nfunction onSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    loader.style.display = \"block\";\n    button.style.display = \"none\";\n\n    const query = form.elements['search'].value;\n    currentQuery = query; \n    page = 1;\n    form.reset()\n    fetchImages(query, page);\n}\n\nfunction loadMore() {\n    loader.style.display = \"block\";\n    page += 1;\n\n    fetchImages(currentQuery, page);\n}\n\nfunction fetchImages(query, page) {\n    fetchIcon(query, page)\n        .then(data => {\n            if (!query.trim()) {\n                iziToast.error({\n                    message: 'Заповніть це поле!',\n                    messageColor: '#FFFFFF',\n                    backgroundColor: '#B51B1B',\n                    position: 'topRight',\n                });\n                loader.style.display = \"none\";\n                return;\n            } else if (data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: '#FFFFFF',\n                    backgroundColor: '#B51B1B',\n                    position: 'center',\n                });\n                loader.style.display = \"none\";\n                return;\n            } \n            else {\n                const imagesHTML = renderImages(data);\n                gallery.insertAdjacentHTML(\"beforeend\", imagesHTML);\n                loader.style.display = \"none\";\n                if (!lightbox) {\n                    lightbox = initializeLightbox();\n                } else {\n                    lightbox.refresh();\n                }\n                scroll();\n            const totalImages = data.totalHits;\n            const totalPages = Math.ceil(totalImages / limit);\n            if (page >= totalPages) {\n                button.style.display = \"none\";\n                return iziToast.error({\n                    position: \"topRight\",\n                    message: \"We're sorry, there are no more images to load\"\n                });\n            } else {\n                button.style.display = \"block\";\n            }\n            }\n        })\n        .catch(error => {\n            loader.style.display = \"none\";\n            iziToast.error({\n                message: 'Fetch error. Please try again later.',\n                messageColor: '#FFFFFF',\n                backgroundColor: '#B51B1B',\n                position: 'center',\n            });\n        });\n}\n\nfunction scroll() {\n    const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: 2 * cardHeight, behavior: 'smooth' });\n}\n"],"names":["renderImages","result","webformatURL","tags","largeImageURL","likes","views","comments","downloads","initializeLightbox","SimpleLightbox","limit","page","fetchIcon","query","params","BASE_URL","response","axios","form","gallery","loader","button","lightbox","currentQuery","onSubmit","loadMore","e","fetchImages","data","iziToast","imagesHTML","scroll","totalImages","totalPages","error","cardHeight"],"mappings":"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"}