{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(result) {\n    return result.hits.map(({webformatURL, tags, largeImageURL, likes, views, comments, downloads})=>{\n        return ` <li>\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" \n        alt=\"${tags}\"\n        data-source=\"${largeImageURL}\">\n        <div class=\"image-info\">\n                            <ul class=\"image-info-list\">\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Likes</h2>\n                                    <p class=\"image-quantity\">${likes}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Views</h2>\n                                    <p class=\"image-quantity\">${views}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Comments</h2>\n                                    <p class=\"image-quantity\">${comments}</p>\n                                </li>\n                                <li class=\"image-item\">\n                                    <h2 class=\"image-text\">Downloads</h2>\n                                    <p class=\"image-quantity\">${downloads}</p>\n                                </li>\n                            </ul>\n                        </div>\n      </li>`;\n    }).join(\"\");\n}\n\nexport function initializeLightbox() {\n    return new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n}\n","import axios from 'axios';\nexport const limit = 15\nexport let page = 1\n\n    \n   \n  \nexport async function fetchIcon(query) {\n    const params = new URLSearchParams({\n        key: '42545240-8b0483885ebe28877133c0801',\n        q: query,\n        per_page: limit,\n        page: page\n      });\n    \n\n    const BASE_URL = 'https://pixabay.com/api/';\n    const response = await axios.get(\n        `${BASE_URL}?${params}`\n      );\n      page +=1\n      \n      \n      return { hits: response.data.hits, totalHits: response.data.totalHits };\n      \n    \n      }\n\n\n\n\n","\nimport { renderImages, initializeLightbox } from './js/render-functions.js';\nimport { fetchIcon, limit } from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst button = document.querySelector(\".load-more\")\nlet lightbox;\nlet page = 1\n\n\n\n\n\nform.addEventListener(\"submit\", onSubmit)\nbutton.addEventListener(\"click\", loadMore)\nfunction onSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    loader.style.display = \"block\";\n    button.style.display = \"none\";\n\n    const query = form.elements['search'].value;\n    page = 1;\n\n    fetchIcon(query)\n        .then(data => {\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: '#FFFFFF',\n                    backgroundColor: '#B51B1B',\n                    position: 'center',\n                });\n                loader.style.display = \"none\";\n                form.reset();\n           \n            \n             \n        } else if(!query.trim()){\n            iziToast.error({\n                message: 'Заповніть це поле!',\n                messageColor: '#FFFFFF',\n                backgroundColor: '#B51B1B',\n                position: 'topRight',\n            });\n            loader.style.display = \"none\";\n        }\n        else {\n            const imagesHTML = renderImages(data);\n            gallery.insertAdjacentHTML(\"beforeend\", imagesHTML);\n            loader.style.display = \"none\";\n            if (!lightbox) {\n                lightbox = initializeLightbox();\n            } else {\n                lightbox.refresh();\n            }\n            const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n\n            window.scrollBy({ top: 2 * cardHeight, behavior: 'smooth' });\n            button.style.display = \"block\";\n            \n        }})\n        .catch(error => {\n           \n            loader.style.display = \"none\";\n            iziToast.error({\n                message: 'Fetch error. Please try again later.',\n                messageColor: '#FFFFFF',\n                backgroundColor: '#B51B1B',\n                position: 'center',\n            });\n        });\n}\n\nfunction loadMore() {\n    const query = form.elements['search'].value;\n    loader.style.display = \"block\";\n\n    page += 1;\n\n    fetchIcon(query)\n        .then(data => {\n            const imagesHTML = renderImages(data);\n            gallery.insertAdjacentHTML(\"beforeend\", imagesHTML);\n            loader.style.display = \"none\";\n            if (!lightbox) {\n                lightbox = initializeLightbox();\n            } else {\n                lightbox.refresh();\n            }\n            const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n            window.scrollBy({ top: 2 * cardHeight, behavior: 'smooth' });\n\n            const totalImages = data.totalHits;\n            const totalPages = Math.ceil(totalImages / limit);\n            if (page >= totalPages) {\n                button.style.display = \"none\";\n                return iziToast.error({\n                    position: \"topRight\",\n                    message: \"We're sorry, there are no more images to load\"\n                });\n            } else {\n                button.style.display = \"block\";\n            }\n        })\n        .catch(error => {\n            \n            loader.style.display = \"none\";\n            iziToast.error({\n                message: 'Fetch error. Please try again later.',\n                messageColor: '#FFFFFF',\n                backgroundColor: '#B51B1B',\n                position: 'center',\n            });\n        });\n}"],"names":["renderImages","result","webformatURL","tags","largeImageURL","likes","views","comments","downloads","initializeLightbox","SimpleLightbox","limit","page","fetchIcon","query","params","BASE_URL","response","axios","form","gallery","loader","button","lightbox","onSubmit","loadMore","e","data","iziToast","imagesHTML","cardHeight","error","totalImages","totalPages"],"mappings":"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"}